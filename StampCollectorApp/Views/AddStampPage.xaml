<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewModels="clr-namespace:StampCollectorApp.ViewModels"
    x:Class="StampCollectorApp.Views.AddStampPage"
    Title="Criar / Editar Selo"
    BackgroundColor="#f3f4f6">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="14">
            <Frame WidthRequest="120"
                   HeightRequest="120"
                   CornerRadius="60"
                   Padding="0"
                   IsClippedToBounds="True"
                   HasShadow="False"
                   VerticalOptions="Center"
                   HorizontalOptions="Center"
                   Margin="0,0,0,10">
                <Image Source="{Binding ImagePath, TargetNullValue='placeholder.png'}"
                       WidthRequest="120"
                       HeightRequest="120"
                       Aspect="AspectFill" />
            </Frame>

            <Frame BackgroundColor="White" CornerRadius="10" 
                   Padding="8" HasShadow="False">
                <Entry Placeholder="Nome" 
                       Text="{Binding Name}" FontSize="14" />
            </Frame>
            <Frame BackgroundColor="White" CornerRadius="10" Padding="8" HasShadow="False">
                <Entry Placeholder="País" Text="{Binding Country}" FontSize="14" />
            </Frame>
            <Frame BackgroundColor="White" CornerRadius="10" Padding="8" HasShadow="False">
                <Entry                   
                    Placeholder="Ano"
                    Text="{Binding Year, Mode=TwoWay}"
                    Keyboard="Numeric"
                    MaxLength="4" />
            </Frame>
            <Frame BackgroundColor="White" CornerRadius="10" Padding="8" HasShadow="False">
                <Picker
                    Title="Condição"
                    ItemsSource="{Binding Conditions}"
                    SelectedItem="{Binding Condition, Mode=TwoWay}" />
            </Frame>
            <Frame BackgroundColor="White" CornerRadius="10" Padding="4" HasShadow="False">
                <Picker
                    Title="Categoria"
                    ItemsSource="{Binding Categories}"
                    ItemDisplayBinding="{Binding Name}"
                    SelectedItem="{Binding SelectedCategory, Mode=TwoWay}" />
            </Frame>
            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center" VerticalOptions="End" Margin="0,0,0,10">
                <Button
                    Text="Procure imagem no API"
                    Command="{Binding FetchImageFromApiCommand}"
                    IsEnabled="{Binding CanFetchImageFromApi}"
                    BackgroundColor="#007AFF"
                    TextColor="White"
                    FontSize="13"
                    FontAttributes="Bold"
                    HeightRequest="40" />
                <Button
                    Text="Escolha imagem local"
                    Command="{Binding PickImageFromDeviceCommand}"
                    BackgroundColor="#28a745"
                    TextColor="White"
                    FontAttributes="Bold"
                    FontSize="13"
                    HeightRequest="40" />
            </HorizontalStackLayout>
            <Button
                Text="Gravar"
                Command="{Binding SaveStampCommand}"
                BackgroundColor="#28a745"
                TextColor="White"
                FontAttributes="Bold"
                HeightRequest="45"
                Margin="0,10,0,5" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
